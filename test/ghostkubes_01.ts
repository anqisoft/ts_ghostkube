// v0.0.5

import { Globals, log, logUsedTime, showUsedTime } from "./log.ts";
import { main } from "./ghostkubes.ts";

Globals.LOG_FILE_NAME = "./ghostkubes_01.log.txt";
const GOAL_FILE = "./js/data_ghostkubes_01.js";

const DATAS: {
  setName: string;
  cubes: [number[], number[]][];
}[] = [
  {
    // keystone
    setName: "KS",
    cubes: [
      [[], []],
    ],
  },

  // small
  {
    setName: "MA-2",
    cubes: [
      [[2], [8, 12]],
      [[7, 10], [4]],
      [[8], [5]],
      [[4], [6, 10]],

      [[5, 12], [2]],
      [[6], [7]],
      [[4, 10], [8]],
      [[7], [2, 12]],

      [[8], [5]],
      [[2, 12], [6]],
      [[5], [4, 10]],
      [[6], [7]],
    ],
  },
  {
    setName: "NI-2",
    cubes: [
      [[], [5, 8, 10]],
      [[12], [6, 7]],
      [[8], [10]],
      [[5], [10]],

      [[6], [12]],
      [[7], [12]],
      [[], [5, 8, 10]],
      [[12], [6, 7]],

      [[2, 8], []],
      [[2, 5], []],
      [[4, 6], []],
      [[4, 7], []],
    ],
  },
  {
    setName: "TF-2",
    cubes: [
      [[5, 8], [10]],
      [[12], [6, 7]],
      [[5, 6], [11]],
      [[9], [7, 8]],

      [[7, 8], [9]],
      [[11], [5, 6]],
      [[7], [6]],
      [[8], [7]],

      [[8], [7]],
      [[5], [8]],
      [[6], [5]],
      [[6], [5]],
    ],
  },
  {
    setName: "PI-2",
    cubes: [
      [[8], [10]],
      [[12], [7]],
      [[4, 5, 12], []],
      [[6], [12]],

      [[10], [5]],
      [[2, 7, 10], []],
      [[], [10, 12]],
      [[12], [10]],

      [[], [4, 10]],
      [[12], [2]],
    ],
  },

  // big
  {
    setName: "TF-6",
    cubes: [
      [[7], [6]],
      [[8], [7]],
      [[5, 10], [8]],
      [[7], [12]],

      [[], [5, 6, 11]],
      [[7, 9], [8]],
      [[7], [9]],
      [[6, 11], [5]],

      [[7], [8]],
      [[8], [5]],
      [[5, 11], [6]],
      [[8], [9]],

      [[], [7, 8, 9]],
      [[5, 11], [6]],
      [[8], [10]],
      [[6, 12], [7]],

      [[6], [5]],
      [[6], [5]],
      [[8, 9], [7]],
      [[6], [11]],

      [[], [5, 8, 10]],
      [[6, 12], [7]],
      [[5], [11]],
      [[8, 9], [7]],
    ],
  },
  {
    setName: "NI-3",
    cubes: [
      [[8], [10]],
      [[12], [7]],
      [[7, 8], []],
      [[5, 8], []],

      [[], [6, 7, 12]],
      [[], [5, 8, 10]],
      [[12], [6, 7]],
      [[5, 8], [10]],

      [[5, 6], [7]],
      [[5, 8], [6]],
      [[5], [10]],
      [[12], [6]],

      [[2], [8]],
      [[7], [4]],
      [[6, 7], [8]],
      [[7], [5, 8]],

      [[4, 6], [7]],
      [[2], [5, 8]],
      [[6, 7], [4]],
      [[2], [5, 8]],

      [[5, 6], [7]],
      [[6], [5, 8]],
      [[2, 5], []],
      [[6], [4]],
    ],
  },
  {
    setName: "MA-3",
    cubes: [
      [[], [2, 12]],
      [[4], [10]],
      [[6, 7], [8]],
      [[5], [7, 8]],

      [[6, 7], []],
      [[], [2, 5, 8, 12]],
      [[4, 6, 7], [10]],
      [[5], [8]],

      [[6, 7], [5]],
      [[6], [5, 8]],
      [[], [2, 5, 12]],
      [[4, 6], [10]],

      [[4, 8], [10]],
      [[2, 12], [7]],
      [[8], [6, 7]],
      [[5], [7, 8]],

      [[7], [6]],
      [[4, 5], [10]],
      [[2, 6, 12], [7]],
      [[5], [8]],

      [[6, 7], [5]],
      [[5, 6, 8], []],
      [[4], [5, 10]],
      [[2, 12], []],
    ],
  },
  {
    setName: "VH-2",
    cubes: [
      [[11], [10, 12]],
      [[9], [10, 12]],
      [[2], [10]],
      [[4], [10, 12]],

      [[12], [9, 11]],
      [[], [1, 11]],
      [[9], [3]],
      [[9], [10, 11]],

      [[2, 12], [10]],
      [[4, 12], []],
      [[], [3]],
      [[1, 3], []],

      [[1], [3]],
      [[4], [2]],
      [[2, 4], []],
      // [[], []],
    ],
  },

  // no name
  {
    setName: "NO-1",
    cubes: [
      [[], [9, 10, 11, 12]],
      [[12], [10]],
      [[12], [10]],
      [[12], [10]],

      [[12], [10]],
      [[12], [10]],
      [[12], [10]],
      [[12], [10]],

      [[12], [10]],
      [[1, 2, 3, 4], []],
    ],
  },
];

log(`begin: ${(new Date()).toLocaleString()}`);
const DATE_BEGIN = performance.now();

showUsedTime("init");
try {
  await main(DATAS, GOAL_FILE);
} catch (error) {
  log("[error]", error);
}
showUsedTime("done");

log(`end: ${(new Date()).toLocaleString()}`);
logUsedTime("Total", performance.now() - DATE_BEGIN);
log("");

/*
cd /d p:\anqi\Desktop\tech\ts\projects\203_ts_ghostkube\test
cls && deno lint ghostkubes_01.ts && deno fmt ghostkubes_01.ts
cls && deno run --v8-flags=--max-old-space-size=20480 -A ghostkubes_01.ts

deno run --v8-flags=--max-old-space-size=20480 -A p:\anqi\Desktop\tech\ts\projects\203_ts_ghostkube\test\ghostkubes_01.ts
*/
